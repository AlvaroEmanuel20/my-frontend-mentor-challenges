let currentTab=0;const mainElements={form:document.getElementById("form"),inputs:document.querySelectorAll(".personal-form > .input-group > input"),errors:document.querySelectorAll(".personal-form > .input-group > .label-group > .error"),nameInput:document.getElementById("name"),emailInput:document.getElementById("email"),phoneInput:document.getElementById("phone"),tabs:document.querySelectorAll(".tab"),tabsActions:document.querySelectorAll(".tabs-actions"),actionsBtns:document.querySelectorAll(".tabs-actions > button"),stepIndicators:document.querySelectorAll(".step-indicator")},plansElements={switchBillingTime:document.getElementById("switch-checkbox"),switchOptions:document.querySelectorAll(".switch-option"),plansDescription:document.querySelectorAll(".plan-description"),plansCard:document.querySelectorAll(".plan")},addonsElements={addonsCards:document.querySelectorAll(".addon"),addonsPrice:document.querySelectorAll(".addon-price")},totalElements={planName:document.querySelector(".total-plan > div > h2"),planPrice:document.getElementById("total-plan-price"),addonsAdded:document.querySelectorAll(".total-addons > li"),addonsAddedPrices:document.querySelectorAll(".total-addons > li > div > span"),priceText:document.querySelector(".total-price > p"),priceValue:document.querySelector(".total-price > span"),changePlanLink:document.querySelector(".total-plan > div > p")},plans=[{name:"Arcade",price:{monthly:9,yearly:90}},{name:"Advanced",price:{monthly:12,yearly:120}},{name:"Pro",price:{monthly:15,yearly:150}}],addons=[{name:"Online service",price:{monthly:1,yearly:10}},{name:"Larger storage",price:{monthly:2,yearly:20}},{name:"Customizable profile",price:{monthly:2,yearly:20}}],planSelected={billingTime:"Monthly",plan:{name:"Arcade",price:{monthly:9,yearly:90}}},addonsSelected=[{name:"Online service",price:{monthly:1,yearly:10}},{name:"Larger storage",price:{monthly:2,yearly:20}}];function showCurrentTab(e){mainElements.tabs[e].style.display="block",mainElements.actionsBtns.forEach(((n,t)=>{0!==t&&3!==t||(n.style.display=[1,2,3].includes(e)?"block":"none"),1!==t&&4!==t||(n.style.display=[0,1,2].includes(e)?"block":"none"),2!==t&&5!==t||(n.style.display=3===e?"block":"none")})),mainElements.tabsActions.forEach((n=>{n.style.justifyContent=0===e?"flex-end":"space-between"})),mainElements.form.style.justifyContent=4===e?"center":"space-between",activeStepIndicatorByTab(e)}function activeStepIndicatorByTab(e){if(mainElements.stepIndicators.forEach((e=>e.classList.remove("active"))),e>=mainElements.stepIndicators.length)return!1;mainElements.stepIndicators[e].classList.add("active")}function setInputError(e,n,t){e.setCustomValidity(t),mainElements.errors[n].textContent=e.validationMessage}function clearInputError(e,n){e.setCustomValidity(""),mainElements.errors[n].textContent=""}function controlPlanCardSelected(e,n,t){planSelected.plan=plans[e],plansElements.plansCard[e].classList.add("selected"),plansElements.plansCard[n].classList.remove("selected"),plansElements.plansCard[t].classList.remove("selected")}function controlAddonCardSelected(e,n){e.classList.contains("selected")?(e.classList.remove("selected"),addonsSelected.splice(addonsSelected.indexOf(addons[n]),1),totalElements.addonsAdded[n].style.display="none"):(e.classList.add("selected"),addonsSelected.push(addons[n]),totalElements.addonsAdded[n].style.display="block"),setTotalValue()}function switchPlanDescription(e){"Yearly"===e?plansElements.plansDescription.forEach(((e,n)=>{e.innerHTML=`\n        <h4>${plans[n].name}</h4>\n        <span>$${plans[n].price.yearly}/yr</span>\n        <p>2 months free</p>\n      `})):plansElements.plansDescription.forEach(((e,n)=>{e.innerHTML=`\n        <h4>${plans[n].name}</h4>\n        <span>$${plans[n].price.monthly}/mo</span>\n      `}))}function switchAddonsPrice(e){addonsElements.addonsPrice.forEach(((n,t)=>{n.textContent="Monthly"===e?`+$${addons[t].price.monthly}/mo`:`+$${addons[t].price.yearly}/yr`}))}function setTotalElementsByBillingTime(e){totalElements.planName.textContent=`${planSelected.plan.name} (${"Yearly"===e?"Yearly":"Monthly"})`,totalElements.planPrice.textContent="Yearly"===e?`$${planSelected.plan.price.yearly}/yr`:`$${planSelected.plan.price.monthly}/mo`,totalElements.priceText.textContent=`Total (per ${"Yearly"===e?"Yearly":"Monthly"})`,totalElements.addonsAddedPrices.forEach(((n,t)=>{n.textContent="Yearly"===e?`+$${addons[t].price.yearly}/yr`:`+$${addons[t].price.monthly}/mo`}))}function setTotalValue(){"Yearly"===planSelected.billingTime?totalElements.priceValue.textContent=`$${planSelected.plan.price.yearly+addonsSelected.reduce(((e,n)=>n.price.yearly+e),0)}/yr`:totalElements.priceValue.textContent=`$${planSelected.plan.price.monthly+addonsSelected.reduce(((e,n)=>n.price.monthly+e),0)}/mo`}mainElements.form.addEventListener("submit",(e=>{e.preventDefault(),console.log("Form submit success:"),mainElements.inputs.forEach((e=>console.log(e.value))),console.log("Plan",planSelected),console.log("Addons",addonsSelected)})),mainElements.actionsBtns.forEach(((e,n)=>{e.addEventListener("click",(()=>!!(1!==n&&4!==n||0!==currentTab||(mainElements.inputs.forEach(((e,n)=>{0===e.value.length?setInputError(e,n,"This field is required"):clearInputError(e,n)})),mainElements.inputs[0].checkValidity()&&mainElements.inputs[1].checkValidity()&&mainElements.inputs[2].checkValidity()))&&(mainElements.tabs[currentTab].style.display="none",!([1,2,4,5].includes(n)&&currentTab>=mainElements.tabs.length)&&((0!==n&&3!==n||!(currentTab<=0))&&([1,2,4,5].includes(n)?currentTab++:currentTab--,void showCurrentTab(currentTab))))))})),mainElements.inputs.forEach(((e,n)=>{e.addEventListener("input",(()=>{0===e.value.length?setInputError(e,n,"This field is required"):clearInputError(e,n),1===n&&e.value.length>0&&(e.checkValidity()?clearInputError(e,n):setInputError(e,n,"Invalid email address")),2===n&&e.value.length>0&&(e.checkValidity()?clearInputError(e,n):setInputError(e,n,"Invalid phone number"))}))})),plansElements.switchBillingTime.addEventListener("change",(()=>{plansElements.switchBillingTime.checked?(planSelected.billingTime="Yearly",plansElements.switchOptions[1].classList.add("active"),plansElements.switchOptions[0].classList.remove("active"),switchPlanDescription("Yearly"),switchAddonsPrice("Yearly"),setTotalElementsByBillingTime("Yearly")):(planSelected.billingTime="Monthly",plansElements.switchOptions[0].classList.add("active"),plansElements.switchOptions[1].classList.remove("active"),switchPlanDescription("Monthly"),switchAddonsPrice("Monthly"),setTotalElementsByBillingTime("Monthly")),setTotalValue()})),plansElements.plansCard.forEach(((e,n)=>{e.addEventListener("click",(()=>{0===n?controlPlanCardSelected(0,1,2):1===n?controlPlanCardSelected(1,0,2):2===n&&controlPlanCardSelected(2,0,1),totalElements.planName.textContent=`${planSelected.plan.name} (${planSelected.billingTime})`,totalElements.planPrice.textContent="Yearly"===planSelected.billingTime?`$${planSelected.plan.price.yearly}/yr`:`$${planSelected.plan.price.monthly}/mo`,setTotalValue()}))})),addonsElements.addonsCards.forEach(((e,n)=>{e.addEventListener("click",(()=>{0===n?controlAddonCardSelected(addonsElements.addonsCards[0],0):1===n?controlAddonCardSelected(addonsElements.addonsCards[1],1):2===n&&controlAddonCardSelected(addonsElements.addonsCards[2],2)}))})),totalElements.changePlanLink.addEventListener("click",(()=>{mainElements.tabs[currentTab].style.display="none",currentTab=1,showCurrentTab(currentTab)})),showCurrentTab(currentTab);
